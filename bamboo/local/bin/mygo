#!/bin/zsh

# 请在本地添加相应数据
. /data/shell/data.sh

bamboo()
{
    ssh ${CN_BLOG_NAME}
}


vps()
{
    ssh ${VPS_NAME}@${VPS_IP} -p ${VPS_PORT}
}


db()
{
    # set -x
    ps -ef|grep ${LOCAL_PORT}| grep NPCf| grep -v grep|awk '{print $2}'|xargs kill -9
    if [[ $? != 0 ]];then
        echo "Kill process failed."
        exit 1
    fi
    ssh -L ${LOCAL_PORT}:127.0.0.1:${REMOTE_PORT} ${SERVER_NAME} -NPCf
}


redis()
{
    if [[ $1 == "local" ]];then
        redis-cli -h ${REDIS_HOST} -p ${REDIS_PORT} -a ${REDIS_PASSWD}
    else
        echo "Not found this redis server."
        exit 1
    fi
}


mc()
{
    if [[ $1 == 'ubuntu' ]];then
        ssh 
    fi
}


usage()
{
    echo "Go to special machine.
    db              go to online mysql, except aws
    ==============================================
    bamboo          go to personal blog server
    vps             go to vps
    ==============================================
    redis           connect local redis or 150
                    local       --connect localhost
    "
}


case "$1" in
    db):
        db;;
    bamboo):
        bamboo;;
    vps):
        vps;;
    redis):
        redis $2;;
    *)
        usage;;
esac
